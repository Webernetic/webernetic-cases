.stagesSection {
  padding: 0 clamp(60px, 7.14vw, 140px);
  margin-bottom: clamp(90px, 9.69vw, 190px);

  &_title {
    margin-bottom: clamp(32px, 1.79vw, 35px);
  }

  &_item {
    display: grid;
    position: relative;
    grid-template-columns: 34% 1fr;
    grid-template-rows: 1fr auto;
    grid-template-areas:
      'title image'
      'text image';
    gap: clamp(24px, 2.55vw, 50px);
    background-color: #beff6c;
    margin: 0;
    padding: clamp(51px, 5.61vw, 110px) clamp(20px, 11.73vw, 230px)
      clamp(36px, 4.29vw, 84px) clamp(20px, 2.55vw, 50px);
    border-radius: clamp(30px, 3.06vw, 60px);
    height: auto;
  }

  &__itemBg2 {
    background-color: #83bdff;
  }

  &__itemBg3 {
    background-color: #fff2a8;
  }

  &__itemBg4 {
    background-color: #ebe4ff;
  }

  &_itemTitle {
    grid-area: title;
    color: #35530e;
    line-height: 105%;
  }

  &__itemTitleColor2 {
    color: #041e3c;
  }

  &__itemTitleColor3 {
    color: #362f03;
  }

  &__itemTitleColor4 {
    color: #352959;
  }

  &_itemText {
    grid-area: text;
    color: #2e460e;
    line-height: 105%;
  }

  &__itemTextColor2 {
    color: #235692;
  }

  &__itemTextColor3 {
    color: #847730;
  }

  &__itemTextColor4 {
    color: #7c729a;
  }

  &_itemImageWrapper {
    position: relative;
    grid-area: image;
    border-radius: clamp(20px, 2.04vw, 40px);
    overflow: hidden;
    color: #352959;
    flex: 1;
    height: auto;
    aspect-ratio: 1.57;

    & > img {
      width: 100%;
      height: 100%;
      object-fit: fill;
    }
  }

  &_itemNumber {
    position: absolute;
    top: clamp(20px, 2.76vw, 54px);
    right: clamp(42px, 2.76vw, 54px);
    font-size: clamp(5rem, 8.67vw, 10.625rem);
    line-height: 105%;
    color: #010002;
  }

  &_itemNumberColor2 {
    color: #0f4684;
  }

  &_itemNumberColor3 {
    color: #594e0e;
  }

  &_itemNumberColor4 {
    color: #403759;
  }

  &_pointer {
    display: none;
    position: absolute;
    width: fit-content;
    padding: clamp(6px, 0.56vw, 11px) clamp(10px, 1.02vw, 20px);
    font-size: clamp(0.775rem, 0.87vw, 1.0693rem);
    color: #010002;
    border-radius: clamp(8px, 0.71vw, 14px);
    line-height: 105%;
    background-color: #c6f649;

    &::before {
      content: '';
      display: block;
      height: clamp(10px, 0.82vw, 16px);
      aspect-ratio: 1;
      background-color: inherit;
      position: absolute;
      border-radius: 4px;
    }
  }

  &__pointerLT {
    border-top-left-radius: 0;

    &::before {
      top: 0;
      left: 0;
      transform: translate(-100%, -100%);
      clip-path: polygon(0% 0%, 40% 100%, 100% 43%);
    }
  }

  &__pointerRT {
    border-top-right-radius: 0;

    &::before {
      right: 0;
      top: 0;
      clip-path: polygon(100% 0%, 60% 100%, 0% 43%);
      transform: translate(100%, -100%);
    }
  }

  &__pointerRB {
    border-bottom-right-radius: 0;

    &::before {
      bottom: 0;
      right: 0;
      transform: translate(100%, 100%);
      clip-path: polygon(60% 0%, 100% 100%, 0% 57%);
    }
  }

  &__pointerLB {
    border-bottom-left-radius: 0;

    &::before {
      bottom: 0;
      left: 0;
      transform: translate(-100%, 100%);
      clip-path: polygon(0% 100%, 40% 0%, 100% 57%);
    }
  }

  &__pointerBg2 {
    background-color: #94c6ff;
  }

  &__pointerBg3 {
    background-color: #ffea6f;
  }

  &__pointerBg4 {
    background-color: #b8b0ff;
  }

  &__pointerPosition1 {
    animation: movePointer1 2s 0s ease;
    left: 5%;
    bottom: 36%;
  }

  &__pointerPosition2 {
    animation: movePointer2 2s 0s ease;
    right: 2%;
    bottom: 46%;
  }

  &__pointerPosition3 {
    animation: movePointer3 2s 0s ease;
    left: 28%;
    bottom: 12%;
  }

  &__pointerPosition4 {
    animation: movePointer4 2s 0s ease;
    right: 19%;
    top: 34%;
  }

  &__pointerPosition5 {
    animation: movePointer5 2s 0s ease;
    right: 54%;
    top: 37%;
  }

  &__pointerPosition6 {
    animation: movePointer6 2s 0s ease;
    left: 13%;
    top: 53%;
  }

  &__pointerPosition7 {
    animation: movePointer7 2s 0s ease;
    left: 34%;
    top: 30%;
  }

  &__pointerPosition8 {
    animation: movePointer8 2s 0s ease;
    left: 48%;
    bottom: 4%;
  }

  &__pointerPosition9 {
    animation: movePointer9 2s 0s ease;
    right: 3%;
    top: 47%;
  }

  @mixin movePointer($x, $y) {
    from {
      transform: translate($x, $y);
    }
    to {
      transform: translate(0%, 0%);
    }
  }

  .swiper-slide-active {
    .stagesSection_pointer {
      display: block;
    }
  }
  @keyframes movePointer1 {
    @include movePointer(-10%, 100%);
  }

  @keyframes movePointer2 {
    @include movePointer(7%, -80%);
  }

  @keyframes movePointer3 {
    @include movePointer(25%, 35%);
  }

  @keyframes movePointer4 {
    @include movePointer(-20%, 30%);
  }

  @keyframes movePointer5 {
    @include movePointer(-10%, 150%);
  }

  @keyframes movePointer6 {
    @include movePointer(17%, 50%);
  }

  @keyframes movePointer7 {
    @include movePointer(-10%, 50%);
  }

  @keyframes movePointer8 {
    @include movePointer(-18%, 30%);
  }

  @keyframes movePointer9 {
    @include movePointer(15%, 50%);
  }
}

@media (max-width: $breakpoints-md) {
  .stagesSection {
    padding: 0;

    &_item {
      padding-right: 20px;
      align-items: stretch;
      grid-template-columns: 1fr;
      grid-template-rows: auto auto 1fr;
      grid-template-areas:
        'title'
        'image'
        'text';
    }

    &_itemTitle {
      margin-bottom: 21px;
      max-width: 80%;
    }

    &_itemContent {
      max-width: 100%;
    }

    &__pointerPosition1 {
      bottom: 38%;
    }

    &__pointerPosition2 {
      right: 3%;
    }

    &__pointerPosition3 {
      bottom: 15%;
    }

    &__pointerPosition8 {
      left: 50%;
      bottom: 4%;
    }
  }
}

@media (max-width: $breakpoints-sm) {
  .stagesSection {
    &_pointer {
      font-size: 0.5rem;
    }

    &__pointerPosition1 {
      bottom: 33%;
    }

    &__pointerPosition2 {
      right: 1%;
    }

    &__pointerPosition3 {
      bottom: 10%;
    }

    &__pointerPosition8 {
      left: 43%;
      bottom: 1%;
    }
  }
}

// кастомизация слайдера
.swiper {
  &_navWrapper {
    display: flex;
    position: relative;
    justify-content: space-between;
    gap: clamp(14px, 1.22vw, 24px);
    padding: 0;
    margin: 0;
    margin-top: clamp(10px, 1.53vw, 30px);
  }

  &_navItem {
    flex: 1;
    gap: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0;
    margin: 0;
    padding: clamp(22px, 1.73vw, 34px) clamp(20px, 2.04vw, 40px);
    border-radius: 20px;
    background-color: $bg-secondary;
  }

  &_activeNavItem {
    background-color: #1c1c1c;
    color: $font-color-invert;
  }
}

@media (max-width: $breakpoints-md) {
  .swiper {
    &_navItem {
      display: none;
    }

    &_navItemDisplay {
      display: flex;
    }
  }
}
